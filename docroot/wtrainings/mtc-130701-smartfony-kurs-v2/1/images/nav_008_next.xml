<?xml version="1.0" encoding="utf-8"?>
<!--
'*    nav_008_next.xml
'*    Copyright (c) Websoft, 2007.  All rights reserved.
-->
<params>
    <object>
        <label>Кнопка &quot;Далее&quot;</label>
        <width>75</width>
        <height>25</height>
        <description>Кнопка &quot;Далее&quot;</description>
    </object>
    <page name="Параметры" w="260" h="150">
        <param type="line" x="8" y="12" w="244" h="79"/>
        <param type="label" text=" " x="11" y="6" w="6" h="13"/>
        <param type="check" id="standard" text="Использовать стандартную кнопку" def="yes" x="15" y="6" w="136" h="13">
            <events>
                <event name="check" target="lab_n1_img" action="disable" />
                <event name="check" target="lab_n2_img" action="disable" />
                <event name="check" target="lab_n3_img" action="disable" />
                <event name="check" target="lab_n4_img" action="disable" />
                <event name="check" target="n1_img" action="disable" />
                <event name="check" target="n2_img" action="disable" />
                <event name="check" target="n3_img" action="disable" />
                <event name="check" target="n4_img" action="disable" />
                <event name="uncheck" target="lab_n1_img" action="enable" />
                <event name="uncheck" target="lab_n2_img" action="enable" />
                <event name="uncheck" target="lab_n3_img" action="enable" />
                <event name="uncheck" target="lab_n4_img" action="enable" />
                <event name="uncheck" target="n1_img" action="enable" />
                <event name="uncheck" target="n2_img" action="enable" />
                <event name="uncheck" target="n3_img" action="enable" />
                <event name="uncheck" target="n4_img" action="enable" />
            </events>
        </param>
        <param type="label" id="lab_n1_img" text="Доступная кнопка:" x="15" y="25" w="130" h="13"/>
        <param type="file" id="n1_img" text="" def="" x="125" y="24" w="100" h="13"/>
        <param type="label" id="lab_n2_img" text="Кнопка при наведении мыши:" x="15" y="41" w="110" h="13"/>
        <param type="file" id="n2_img" text="" def="" x="125" y="40" w="100" h="13"/>
        <param type="label" id="lab_n3_img" text="Недоступная кнопка:" x="15" y="56" w="110" h="13"/>
        <param type="file" id="n3_img" text="" def="" x="125" y="55" w="100" h="13"/>
        <param type="label" id="lab_n4_img" text="Активная кнопка:" x="15" y="72" w="110" h="13"/>
        <param type="file" id="n4_img" text="" def="" x="125" y="71" w="100" h="13"/>
        <param type="label" text="Подсказка для доступной:" x="10" y="96" w="110" h="13"/>
        <param type="edit" id="alt_enabled" text="" def="Переход на следующий слайд" x="125" y="95" w="125" h="13"/>
        <param type="label" text="Подсказка для недоступной:" x="10" y="112" w="110" h="13"/>
        <param type="edit" id="alt_disabled" text="" def="Переход невозможен" x="125" y="111" w="125" h="13"/>
        <param type="check" id="nav_lock" text="Использовать режим строгой навигации" def="yes" x="10" y="128" w="184" h="13"/>
    </page>
	<page name="Звук" w="240" h="240">
		<param type="line" id="" text="" def="" x="8" y="15" w="224" h="94"/>
		<param type="check" id="sound.enabled" text=" Использовать звуковые эффекты " def="no" x="15" y="9" w="132" h="13">
			<events>
				<event name="check" target="lab.sound.scheme" action="enable"/>
				<event name="check" target="sound.scheme" action="enable"/>
				<event name="check" target="sound.user" action="enable"/>
				<event name="check" target="lab.sound.file.over" action="enable"/>
				<event name="check" target="sound.file.over" action="enable"/>
				<event name="check" target="lab.sound.file.over.user" action="enable"/>
				<event name="check" target="sound.file.over.user" action="enable"/>
				<event name="check" target="lab.sound.file.click" action="enable"/>
				<event name="check" target="sound.file.click" action="enable"/>
				<event name="check" target="lab.sound.file.click.user" action="enable"/>
				<event name="check" target="sound.file.click.user" action="enable"/>

				<event name="uncheck" target="lab.sound.scheme" action="disable"/>
				<event name="uncheck" target="sound.scheme" action="disable"/>
				<event name="uncheck" target="sound.user" action="disable"/>
				<event name="uncheck" target="lab.sound.file.over" action="disable"/>
				<event name="uncheck" target="sound.file.over" action="disable"/>
				<event name="uncheck" target="lab.sound.file.over.user" action="disable"/>
				<event name="uncheck" target="sound.file.over.user" action="disable"/>
				<event name="uncheck" target="lab.sound.file.click" action="disable"/>
				<event name="uncheck" target="sound.file.click" action="disable"/>
				<event name="uncheck" target="lab.sound.file.click.user" action="disable"/>
				<event name="uncheck" target="sound.file.click.user" action="disable"/>
			</events>
		</param>
		<param type="label" id="lab.sound.scheme" text="События со звуком:" def="" x="15" y="26" w="90" h="13"/>
		<param type="select" id="sound.scheme" text="" def="overclick" x="110" y="25" w="110" h="13">
			<items>
				<item id="click" label="Только нажатие мыши"/>
				<item id="overclick" label="Нажатие и наведение"/>
				<item id="over" label="Только наведение"/>
			</items>
		</param>
		<param type="label" id="lab.sound.file.over" text="Звук для наведения:" def="" x="15" y="42" w="90" h="13"/>
		<param type="select" id="sound.file.over" text="" def="over1" x="110" y="41" w="110" h="13">
			<items>
				<item id="over1" label="Стандартный 1">
					<events>
						<event name="selendok" target="lab.sound.file.over.user" action="disable"></event>
						<event name="selendok" target="sound.file.over.user" action="disable"></event>
					</events>
				</item>
				<item id="over2" label="Стандартный 2">
					<events>
						<event name="selendok" target="lab.sound.file.over.user" action="disable"></event>
						<event name="selendok" target="sound.file.over.user" action="disable"></event>
					</events>
				</item>
				<item id="over3" label="Стандартный 3">
					<events>
						<event name="selendok" target="lab.sound.file.over.user" action="disable"></event>
						<event name="selendok" target="sound.file.over.user" action="disable"></event>
					</events>
				</item>
				<item id="over4" label="Стандартный 4">
					<events>
						<event name="selendok" target="lab.sound.file.over.user" action="disable"></event>
						<event name="selendok" target="sound.file.over.user" action="disable"></event>
					</events>
				</item>
				<item id="custom" label="Загрузить нестандартный">
					<events>
						<event name="selendok" target="lab.sound.file.over.user" action="enable"></event>
						<event name="selendok" target="sound.file.over.user" action="enable"></event>
					</events>
				</item>
			</items>
		</param>
		<param type="label" id="lab.sound.file.over.user" text="Звуковой файл:" def="" x="15" y="58" w="90" h="13"/>
		<param type="file" id="sound.file.over.user" text="" def="" x="110" y="57" w="93" h="13"/>
		<param type="label" id="lab.sound.file.click" text="Звук для нажатия:" def="" x="15" y="74" w="90" h="13"/>
		<param type="select" id="sound.file.click" text="" def="click1" x="110" y="73" w="110" h="13">
			<items>
				<item id="click1" label="Стандартный 1">
					<events>
						<event name="selendok" target="lab.sound.file.click.user" action="disable"></event>
						<event name="selendok" target="sound.file.click.user" action="disable"></event>
					</events>
				</item>
				<item id="click2" label="Стандартный 2">
					<events>
						<event name="selendok" target="lab.sound.file.click.user" action="disable"></event>
						<event name="selendok" target="sound.file.click.user" action="disable"></event>
					</events>
				</item>
				<item id="click3" label="Стандартный 3">
					<events>
						<event name="selendok" target="lab.sound.file.click.user" action="disable"></event>
						<event name="selendok" target="sound.file.click.user" action="disable"></event>
					</events>
				</item>
				<item id="click4" label="Стандартный 4">
					<events>
						<event name="selendok" target="lab.sound.file.click.user" action="disable"></event>
						<event name="selendok" target="sound.file.click.user" action="disable"></event>
					</events>
				</item>
				<item id="custom" label="Загрузить нестандартный">
					<events>
						<event name="selendok" target="lab.sound.file.click.user" action="enable"></event>
						<event name="selendok" target="sound.file.click.user" action="enable"></event>
					</events>
				</item>
			</items>
		</param>
		<param type="label" id="lab.sound.file.click.user" text="Звуковой файл:" def="" x="15" y="90" w="90" h="13"/>
		<param type="file" id="sound.file.click.user" text="" def="" x="110" y="89" w="93" h="13"/>
	</page>
    <methods>
        <method name="Constructor" label="_Constructor" access="private">
            <params>
            </params>
            <body>
                <![CDATA[function Constructor(argobj)
                {
                    if(argobj.pid==null) return false;
                    var oCurObj = document.getElementById(argobj.pid);
                    if(oCurObj==null) return false;
                    var oParams = g_oParams.selectSingleNode("./param[@objectid='"+argobj.pid+"']");
                    var bNavLock = (oParams.selectSingleNode("nav_lock").text=="yes");
                    oCurObj.setAttribute("state","enabled");
                    oCurObj.setAttribute("navlock", bNavLock ? "1" : "0");
                    AddEvtHandler("EVENT_SLIDE_OPENED", "nav_008_next", argobj.pid);
                    AddEvtHandler("EVENT_SLIDE_COMPLETE", "nav_008_next", argobj.pid);
                    AddEvtHandler("EVENT_NAVIGATION", "nav_008_next", argobj.pid);
                    return true;
                }]]>
            </body>
        </method>
        <method name="HandleEvt" label="_HandleEvt" access="private">
            <params>
            </params>
            <body>
                <![CDATA[function HandleEvt(oEvtHandler, oArg)
                {
                    var argobj = new Object;
                    argobj.pid = oEvtHandler.sTargetId;
                    var oCurObj = document.getElementById(argobj.pid);
                    if(oCurObj==null) return false;
                    var sCurrentSlideId = g_oSlide.getAttribute("id");
                    var sSavedSlideId = oCurObj.getAttribute("sid");
                    if(sSavedSlideId==null) sSavedSlideId = "";
                    switch (oEvtHandler.sEvt)
                    {
                        case "EVENT_SLIDE_OPENED":
                            if(sSavedSlideId!=sCurrentSlideId) oCurObj.setAttribute("sid","");
                            CallMethod("nav_008_next", (oCurObj.getAttribute("navlock")=="1") ? "DisableAccess" : "EnableAccess", argobj);
                            break;
                        case "EVENT_SLIDE_COMPLETE":
                            if(oCurObj.getAttribute("navlock")=="1" && sSavedSlideId=="")
                            {
                                oCurObj.setAttribute("sid","");
                                CallMethod("nav_008_next","EnableAccess",argobj);
                            }
                            break;
                        case "EVENT_NAVIGATION":
                            if(oArg==null) return false;
                            if(oArg.sTargets=="next" || oArg.sTargets=="all" || oArg.sTargets=="buttons")
                            {
                                if(oArg.sAction=="on")
                                {
                                    oCurObj.setAttribute("sid", "");
                                    CallMethod("nav_008_next", "EnableAccess", argobj);
                                }
                                if(oArg.sAction=="off")
                                {
                                    oCurObj.setAttribute("sid", sCurrentSlideId);
                                    CallMethod("nav_008_next", "DisableAccess", argobj);
                                }
                            }
                            break;
                        default:
                            break;
                    }
                    return true;
                }]]>
            </body>
        </method>
        <method name="DisableAccess" label="ЗАПРЕТИТЬ" access="public">
            <params>
            </params>
            <body>
                <![CDATA[function DisableAccess(argobj)
                {
                    if(argobj.pid==null) return false;
                    var oCurObj = document.getElementById(argobj.pid);
                    if(oCurObj==null) return false;
                    var oEnabled = document.getElementById(argobj.pid+"_NextEnabled");
                    var oDisabled = document.getElementById(argobj.pid+"_NextDisabled");
                    if(oEnabled==null || oDisabled==null) return false;
                    oEnabled.style.display = "none";
                    oDisabled.style.display = g_isMSIE ? "inline" : "block";
                    oCurObj.setAttribute("state","disabled");
                    return true;
                }]]>
            </body>
        </method>
        <method name="EnableAccess" label="РАЗРЕШИТЬ" access="public">
            <params>
            </params>
            <body>
                <![CDATA[function EnableAccess(argobj)
                {
                    if(argobj.pid==null) return false;
                    var oCurObj = document.getElementById(argobj.pid);
                    if(oCurObj==null) return false;
                    var oParams = g_oParams.selectSingleNode("./param[@objectid='" + argobj.pid + "']");
                    if(oParams==null) return false;
                    // Detecting structure object
                    var oStructure = g_oSlides.selectSingleNode("//object[@type='nav_025_structure']");
                    var bStructure = (oStructure!=null);

                    if(bStructure)
                    {
                        var sStructureId = oStructure.getAttribute("id");
                        var sCurrentSlideId = g_oSlide.getAttribute("id");
                        var oStructureArgs = { pid: sStructureId, current: sCurrentSlideId, dir: "next" };
                        CallMethod("nav_025_structure", "GetSlideFromStructure", oStructureArgs);
                        var sTargetSlideId = g_arMethodReturnValue[sStructureId];
                        if(sTargetSlideId==null)
                        {
                            CallMethod("nav_008_next", "DisableAccess", argobj);
                            return false;
                        }
                    }
                    else
                    {
                        var oNextSlide = GetSibling(g_oSlide, "next");
                        if(oNextSlide==null)
                        {
                            CallMethod("nav_008_next", "DisableAccess", argobj);
                            return false;
                        }
                    }
                    var oEnabled = document.getElementById(argobj.pid+"_NextEnabled");
                    var oDisabled = document.getElementById(argobj.pid+"_NextDisabled");
                    if(oEnabled==null || oDisabled==null) return false;
                    oDisabled.style.display = "none";
                    oEnabled.style.display = g_isMSIE ? "inline" : "block";
                    oCurObj.setAttribute("state","enabled");
                    return true;
                }]]>
            </body>
        </method>
        <method name="JumpNext" label="_JumpNext" access="private">
            <params>
            </params>
            <body>
                <![CDATA[function JumpNext(argobj)
                {
                    if(argobj.pid==null) return false;
                    var oCurObj = document.getElementById(argobj.pid);
                    if(oCurObj==null) return false;
                    var oParams = g_oParams.selectSingleNode("./param[@objectid='" + argobj.pid + "']");
                    if(oParams==null) return false;
                    // Detecting structure object
                    var oStructure = g_oSlides.selectSingleNode("//object[@type='nav_025_structure']");
                    var bStructure = (oStructure!=null);

                    if(bStructure)
                    {
                        var sStructureId = oStructure.getAttribute("id");
                        var sCurrentSlideId = g_oSlide.getAttribute("id");
                        var oStructureArgs = { pid: sStructureId, current: sCurrentSlideId, dir: "next" };
                        CallMethod("nav_025_structure", "GetSlideFromStructure", oStructureArgs);
                        var sTargetSlideId = g_arMethodReturnValue[sStructureId];
                        if(sTargetSlideId==null) return false;
                        CallMethod("nav_008_next", "DisableAccess", argobj);
                        OpenSlideById(sTargetSlideId);
                    }
                    else
                    {
                        var oNextSlide = GetSibling(g_oSlide, "next");
                        if(oNextSlide==null) return false;
                        CallMethod("nav_008_next", "DisableAccess", argobj);
                        NextSlide();
                    }
					PlayObjectSound({ pid: argobj.pid, snd: "click" });
                    return true;
                }]]>
            </body>
        </method>
        <method name="GetProperty" label="_GetProperty" access="private">
            <params>
            </params>
            <body>
                <![CDATA[function GetProperty(argobj)
                {
                    if(argobj.pid==null || argobj.property==null) return false;
                    var oCurObj = document.getElementById(argobj.pid);
                    if(oCurObj==null) return false;
                    switch(argobj.property.toLowerCase())
                    {
                        case "disabled":    g_vPropertyValue = oCurObj.getAttribute("state")=="disabled" ? "1" : "0";    break;
                        default: return true;
                    }
                    return true;
                }]]>
            </body>
        </method>
		<method name="Over" label="_Over" access="private">
			<params>
			</params>
			<body>
				<![CDATA[function Over(argobj)
				{
					if(argobj.pid==null) return false;
					if(document.getElementById(argobj.pid+"_NextImg")==null) return false;
					if(document.getElementById(argobj.pid+"_Next_1")==null) return false;
					if(document.getElementById(argobj.pid+"_Next_1").src=="") return false;
					document.getElementById(argobj.pid+"_NextImg").src = document.getElementById(argobj.pid+"_Next_1").src;
					PlayObjectSound({ pid: argobj.pid, snd: "over" });
					return true;
				}]]>
			</body>
		</method>
		<method name="Out" label="_Out" access="private">
			<params>
			</params>
			<body>
				<![CDATA[function Out(argobj)
				{
					if(argobj.pid==null) return false;
					if(document.getElementById(argobj.pid+"_NextImg")==null) return false;
					if(document.getElementById(argobj.pid+"_Next_0")==null) return false;
					if(document.getElementById(argobj.pid+"_Next_0").src=="") return false;
					document.getElementById(argobj.pid+"_NextImg").src = document.getElementById(argobj.pid+"_Next_0").src;
					return true;
				}]]>
			</body>
		</method>
		<method name="Click" label="_Click" access="private">
			<params>
			</params>
			<body>
				<![CDATA[function Click(argobj)
				{
					if(argobj.pid==null) return false;
					CallMethod("nav_008_next", "Out", { pid: argobj.pid });
					CallMethod("nav_008_next", "JumpNext", { pid: argobj.pid });
					return true;
				}]]>
			</body>
		</method>
		<method name="Down" label="_Down" access="private">
			<params>
			</params>
			<body>
				<![CDATA[function Down(argobj)
				{
					if(argobj.pid==null) return false;
					if(document.getElementById(argobj.pid+"_NextImg")==null) return false;
					if(document.getElementById(argobj.pid+"_Next_3")==null) return false;
					if(document.getElementById(argobj.pid+"_Next_3").src=="") return false;
					document.getElementById(argobj.pid+"_NextImg").src = document.getElementById(argobj.pid+"_Next_3").src;
					return true;
				}]]>
			</body>
		</method>
    </methods>
</params>
